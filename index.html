<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sectioned Text Input</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
  
  <div class="bg-white p-6 rounded shadow-md w-full max-w-2xl">
    <h1 class="text-2xl font-semibold text-gray-800 mb-4">Text Sections</h1>
    <p class="text-sm text-gray-600 mb-4">
      This text area has four sections. On the first submit, the body text will be removed, leaving only the headings. Afterwards, even if you refresh or revisit, only headings will remain, forcing you to re-enter the data.
    </p>

    <!-- Notification -->
    <div id="notification" class="hidden mb-4 p-4 bg-yellow-100 border border-yellow-300 text-yellow-800 rounded">
      Data was deleted. Please re-enter the body content under each heading.
    </div>

    <!-- Text Area -->
    <textarea 
      id="textArea" 
      rows="10" 
      class="w-full p-4 border rounded resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 overflow-auto"
    ></textarea>

    <div class="mt-4 text-right">
      <button 
        id="submitBtn" 
        class="bg-blue-500 text-white px-6 py-2 rounded font-semibold hover:bg-blue-600 transition"
      >
        Submit
      </button>
    </div>
  </div>

  <script>
    const originalText = 
`Section 1 Heading
This is the body text for section 1. It provides detailed information.

Section 2 Heading
This is the body text for section 2. More details are explained here.

Section 3 Heading
This is the body text for section 3. Additional information is included.

Section 4 Heading
This is the body text for section 4. Further elaboration goes here.
`;

    const justHeadings = 
`Section 1 Heading

Section 2 Heading

Section 3 Heading

Section 4 Heading
`;

    const textArea = document.getElementById('textArea');
    const notification = document.getElementById('notification');
    const submitBtn = document.getElementById('submitBtn');
    let firstClick = true;

    // Check localStorage to see if data was previously deleted
    const dataDeletedFlag = localStorage.getItem('dataDeleted');

    // If data was deleted before, show only headings
    if (dataDeletedFlag === 'true') {
      textArea.value = justHeadings;
      firstClick = false; // No deletion needed on first click this time
    } else {
      // Otherwise, show original text with body
      textArea.value = originalText;
    }

    submitBtn.addEventListener('click', function() {
      if (firstClick) {
        // Remove body text, leaving only headings
        textArea.value = justHeadings;
        notification.classList.remove('hidden');

        // Set flag in localStorage so that after refresh or revisit, data stays deleted
        localStorage.setItem('dataDeleted', 'true');

        firstClick = false;
      } else {
        // After the initial deletion, subsequent clicks won't restore or remove text;
        // you can handle form submission or other logic here if needed.
      }
    });
  </script>

</body>
</html>
