<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sectioned Text Input</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
  
  <div class="bg-white p-6 rounded shadow-md w-full max-w-2xl">
    <h1 class="text-2xl font-semibold text-gray-800 mb-4">Text Sections</h1>
    <p class="text-sm text-gray-600 mb-4">
      Initially, only section headings are displayed. Please enter the body text under each heading. Once you submit the first time, the body text will be removed, and you'll have to re-enter. If needed, you can restore the original data.
    </p>

    <!-- Notification -->
    <div id="notification" class="hidden mb-4 p-4 bg-yellow-100 border border-yellow-300 text-yellow-800 rounded">
      Data was deleted. Please re-enter the body content under each heading.
    </div>

    <!-- Text Area -->
    <textarea 
      id="textArea" 
      rows="10" 
      class="w-full p-4 border rounded resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 overflow-auto"
    ></textarea>

    <div class="mt-4 flex justify-between">
      <button 
        id="restoreBtn"
        class="bg-green-500 text-white px-4 py-2 rounded font-semibold hover:bg-green-600 transition"
      >
        Restore Original Data
      </button>

      <button 
        id="submitBtn" 
        class="bg-blue-500 text-white px-6 py-2 rounded font-semibold hover:bg-blue-600 transition"
      >
        Submit
      </button>
    </div>
  </div>

  <script>
    // Define the original data with headings and bodies
    const originalData = `
Section 1: The history of mars
Mars has been studied extensively by multiple space agencies. It is often called the Red Planet.

Section 2: Water on mars
There is evidence of ancient water flows and ice caps at the poles of Mars.

Section 3: Terraforming challenges
Turning Mars into a habitable planet poses significant scientific and ethical questions.

Section 4: Future missions
Many upcoming missions aim to bring samples from Mars back to Earth and eventually send humans there.
`.trim();

    let firstClick = true;
    const textArea = document.getElementById('textArea');
    const notification = document.getElementById('notification');

    // On page load, only show headings (no body)
    textArea.value = extractHeadings(originalData);

    document.getElementById('submitBtn').addEventListener('click', function() {
      if (firstClick) {
        removeBodyText();
        notification.classList.remove('hidden');
        firstClick = false;
      } else {
        // On subsequent clicks, handle other logic if needed.
      }
    });

    document.getElementById('restoreBtn').addEventListener('click', function() {
      // Restore the full original data
      textArea.value = originalData;
      notification.classList.add('hidden');
      // Reset firstClick if you want the deletion logic again on next submit.
      firstClick = true;
    });

    function isHeadingLine(line) {
      // Check if line matches pattern like "Section <number>:"
      // Example: "Section 1: The history of mars"
      return /^Section\s+\d+\s*:\s*/i.test(line);
    }

    function extractHeadings(data) {
      const lines = data.split('\n');
      let result = [];
      let lastWasHeading = false;

      for (let i = 0; i < lines.length; i++) {
        const line = lines[i].trim();
        if (isHeadingLine(line)) {
          // Keep heading
          result.push(line);
          lastWasHeading = true;
        } else {
          // This is body text, skip it
          // If there's a blank line right after heading, you can keep it.
          // Let's keep a blank line after each heading to maintain spacing.
          if (lastWasHeading) {
            result.push(''); 
            lastWasHeading = false;
          }
        }
      }
      return result.join('\n');
    }

    function removeBodyText() {
      const lines = textArea.value.split('\n');
      let cleanedLines = [];
      let lastLineWasHeading = false;

      for (let i = 0; i < lines.length; i++) {
        let line = lines[i].trim();
        if (isHeadingLine(line)) {
          cleanedLines.push(line);
          lastLineWasHeading = true;
        } else {
          // For body lines, skip them.
          // If we have a blank line after heading, let's keep one blank line.
          if (line === '' && lastLineWasHeading) {
            cleanedLines.push('');
            lastLineWasHeading = false;
          }
        }
      }

      textArea.value = cleanedLines.join('\n');
    }
  </script>

</body>
</html>
